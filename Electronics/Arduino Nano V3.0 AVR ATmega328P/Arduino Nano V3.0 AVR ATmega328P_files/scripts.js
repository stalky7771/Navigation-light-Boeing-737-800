var popupStatus=0;var ifrh=370;var ifrw=600;function JQerrorInint(){jQuery.error=function(message){_gaq.push(['_trackEvent','jQuery Error',message,navigator.userAgent])}}function loadPopup(link,showHTML){if(popupStatus==0){setWiH();$("#backgroundPopup").css({"opacity":"0.5"});$("#backgroundPopup").fadeIn("slow");$("#popupBasket").fadeIn("slow");popupStatus=1;if(showHTML==true)$('#popupBasket').html('<div class="pages"><i class="fa fa-times" aria-hidden="true" onclick="disablePopup();"></i>'+$('.'+link).html()+'</div>');else $('#popupBasket').html("<i class=\"fa fa-times\" aria-hidden=\"true\" onclick=\"disablePopup();\"></i><iframe src='"+link+"' height='"+ifrh+"' width='"+ifrw+"' id='basketifr' style='padding:0; margin:0' scrolling='no' onload=\"setTimeout(setWiH, 10)\">Загрузка...</iframe>")}}function setWiH(){$("#basketifr").height(ifrh);$("#basketifr").width(ifrw);$("#popupBasket").width(ifrw);$("#popupBasket").height(ifrh);centerPopup()}function disablePopup(){if(popupStatus==1){$("#backgroundPopup").fadeOut("slow");$("#popupBasket").fadeOut("slow");popupStatus=0;ifrh=350;ifrw=600}}function centerPopup(){var windowWidth=document.documentElement.clientWidth;var windowHeight=document.documentElement.clientHeight;var popupHeight=$("#popupBasket").height();var popupWidth=$("#popupBasket").width();if(windowHeight>popupHeight){$("#popupBasket").css({"position":"fixed","top":windowHeight/2-popupHeight/2+"px","left":windowWidth/2-popupWidth/2})}else{$("#popupBasket").css({"position":"absolute","top":"20px","left":windowWidth/2-popupWidth/2});jQuery("html:not(:animated),body:not(:animated)").animate({scrollTop:'body'},1100)}$("#backgroundPopup").css({"height":windowHeight})}function opencart(link,showHTML){centerPopup();loadPopup(link,showHTML)}$(document).ready(function(){$("#backgroundPopup").click(function(){disablePopup()});$(document).keypress(function(e){if(e.keyCode==27&&popupStatus==1){disablePopup();disablePopupQS()}})});function disablePopupQS(){document.getElementById('backgroundPopup').style.display='none'}function open_window(link,w,h){var win="width="+w+",height="+h+",menubar=no,location=no,resizable=yes,scrollbars=yes";newWin=window.open(link,'newWin',win);newWin.focus()}function open_printable_version(link){var win="menubar=no,location=no,resizable=yes,scrollbars=yes";newWin=window.open(link,'perintableWin',win);newWin.focus()}function confirmDelete(id,ask,url){temp=window.confirm(ask);if(temp){window.location=url+id}}function confirmUnsubscribe(){temp=window.confirm('{/literal}{$smarty.const.QUESTION_UNSUBSCRIBE}{literal}');if(temp){window.location="index.php?killuser=yes"}}function validate(){if(document.subscription_form.email.value.length<1){alert("{/literal}{$smarty.const.ERROR_INPUT_EMAIL}{literal}");return false}if(document.subscription_form.email.value=='Email'){alert("{/literal}{$smarty.const.ERROR_INPUT_EMAIL}{literal}");return false}return true}function validate_disc(){if(document.formD.nick.value.length<1){alert("{/literal}{$smarty.const.ERROR_INPUT_NICKNAME}{literal}");return false}if(document.formD.topic.value.length<1){alert("{/literal}{$smarty.const.ERROR_INPUT_MESSAGE_SUBJECT}{literal}");return false}document.formD.vert.value="2";return true}function validate_search(){if(document.Sform.price1.value!=""&&((document.Sform.price1.value<0)||isNaN(document.Sform.price1.value))){alert("{/literal}{$smarty.const.ERROR_INPUT_PRICE}{literal}");return false}if(document.Sform.price2.value!=""&&((document.Sform.price2.value<0)||isNaN(document.Sform.price2.value))){alert("{/literal}{$smarty.const.ERROR_INPUT_PRICE}{literal}");return false}return true}function ajaxCart(prdID,formobj,divimg,brief){var hiddenvariantsstr='';if(brief){var hiddenvariants=$("input[name^='option_select_hidden_']").filter("input[name$='_"+prdID+"']")}else{var hiddenvariants=$("input[name^='option_select_hidden_']")}for(var i=0;i<hiddenvariants.length;i++){hiddenvariantsstr+="&"+hiddenvariants[i].name+"="+hiddenvariants[i].value}$.ajax({url:"ajaxCart.php",data:'productID='+prdID+'&numgoods='+formobj.numgoods.value+hiddenvariantsstr,dataType:'text',type:'POST',success:function(data){$('#cart_informer').html(data)}});var o1=$('#'+divimg).offset();var o2=$('#cart_informer').offset();var dx=o1.left-o2.left;var dy=o1.top-o2.top;var distance=Math.round(Math.sqrt(dx*dx+dy*dy));$('#'+divimg).find('.image').effect("transfer",{to:$("#cart_informer"),className:'transfer_class'},distance);$('.transfer_class').html($('#'+divimg).html());$('.transfer_class').find('img').css('height','100%');return false}if(typeof addEvent!=="function"){function addEvent(elt,name,handler,atEnd){name=name.replace(/^(on)?/,'on');var prev=elt[name];var tmp='__tmp';elt[name]=function(e){if(!e)e=window.event;var result;if(!atEnd){elt[tmp]=handler;result=elt[tmp](e);elt[tmp]=null;if(result===false)return result}if(prev){elt[tmp]=prev;result=elt[tmp](e);elt[tmp]=null}if(atEnd&&result!==false){elt[tmp]=handler;result=elt[tmp](e);elt[tmp]=null}return result};return handler}}if(typeof getElement!=="function"){function getElement(iElementId){if(document.getElementById){return document.getElementById(iElementId)}if(document.all){return document.all[iElementId]}if(document.layers){return document.layers[iElementId]}return null}}function addinfotocopytext(event){var htmlcopytxt='\n\n<br /><br />Источник '+window.location.href+'<br /><br />\n\n';var minlen=25;htmlcopytxt=htmlcopytxt.replace(/(&)sid=[0-9a-f]{32}/g,'');var copy_sp=getElement('ctrlcopy');if(copy_sp!=null){copy_sp.parentNode.removeChild(copy_sp)}var copy_sp=document.createElement('div');copy_sp.id='ctrlcopy';copy_sp.style.position='absolute';copy_sp.style.left='-99999px';copy_sp.innerHTML=htmlcopytxt;if(window.getSelection){var slcted=window.getSelection();var seltxt=slcted.toString();if(!seltxt||seltxt.length<minlen)return;var nslct=slcted.getRangeAt(0);seltxt=nslct.cloneRange();seltxt.collapse(false);seltxt.insertNode(copy_sp);nslct.setEndAfter(copy_sp);slcted.removeAllRanges();slcted.addRange(nslct)}else if(document.selection){var slcted=document.selection;var nslct=slcted.createRange();var seltxt=nslct.text;if(!seltxt||seltxt.lengt<minlen)return;seltxt=nslct.duplicate();seltxt.collapse(false);seltxt.pasteHTML(copy_sp.outerHTML);nslct.setEndPoint("EndToEnd",seltxt);nslct.select()}}jQuery(document).ready(function(){jQuery("#back-top").hide();jQuery(function(){jQuery(window).scroll(function(){if(jQuery(this).scrollTop()>100){jQuery('#back-top').fadeIn()}else{jQuery('#back-top').fadeOut()}});jQuery('#back-top a').click(function(){jQuery('body,html').animate({scrollTop:0},800);return false})})});